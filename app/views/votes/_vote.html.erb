<% vote_count = getUpvoteCount(answer) - getDownvoteCount(answer)%>

<div class="d-flex flex-column justify-content-center">
  <div class="p-0 text-center">
    <%= form_with(model: answer.votes.build, local: true, class: "vote-button") do |f| %>
      <%= hidden_field_tag :answer_id, answer.id%>
      <%= hidden_field_tag :vote_type, "upvote" %>

      <% if logged_in? %>
        <%= hidden_field_tag :user_id, current_user.id %>
        <% vote = current_user.votes.find_by(answer_id: answer.id) %>
        <% if vote.nil? || vote.vote_type != "upvote"%>
          <%= image_submit_tag("caret-up.svg", height: 20, width: 20) %>
        <% else %>
          <img src="<%= image_path("caret-up-fill.svg") %>" alt="upvote fill" width="20" height="20">
        <% end %>
      <% else %>
        <img src="<%= image_path("caret-up.svg") %>" alt="upvote fill" width="20" height="20">
      <% end %>
    <% end %>

  </div>
  <div class="p-0 vote-button text-center">
    <%= vote_count %>
  </div>
  <div class="p-0 text-center">
    <%= form_with(model: answer.votes.build, local: true, class: "vote-button") do |f| %>
      <%= hidden_field_tag :answer_id, answer.id %>
      <%= hidden_field_tag :vote_type, "downvote" %>
      <% if logged_in? %>
        <%= hidden_field_tag :user_id, current_user.id %>
        <% vote = current_user.votes.find_by(answer_id: answer.id) %>
        <% if vote.nil? || vote.vote_type != "downvote"%>
          <%= image_submit_tag("caret-down.svg", height: 20, width: 20) %>
        <% else %>
          <img src="<%= image_path("caret-down-fill.svg") %>" alt="downvote fill" width="20" height="20">
        <% end %>
      <% else %>
        <img src="<%= image_path("caret-down.svg") %>" alt="downvote" width="20" height="20">
      <% end %>
    <% end %>
  </div>
</div>